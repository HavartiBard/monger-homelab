---
k3s_cluster:
  children:
    server:
      hosts:
%{ for server in servers }
        ${server}: # control.local
%{ endfor }
    agent:
      hosts:
%{ for agent in agents }
        ${agent}: # worker.local
%{ endfor }

  vars:
    ansible_port: 22
    ansible_user: james
    k3s_version: v1.26.9+k3s1
    token: "oNeg.4*tHbg4fiwTT2do"  # Use ansible vault if you want to keep it secret
    api_endpoint: "{{ hostvars[groups['server'][0]]['ansible_host'] | default(groups['server'][0]) }}"
    extra_server_args: ""
    extra_agent_args: ""